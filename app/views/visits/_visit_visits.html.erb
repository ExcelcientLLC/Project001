<% @events.each do |event| %>
  <% if event == @events.first %>
    <% if event.isVisit() %>
      <%= link_to(client_visit_path(event.client, event), :remote => true) do %>
        <% if event == @visit %>
          <div class="circle_icon" style="left:<%=getEventLocationPercentage(@events, event).to_s %>%;background-color:#fdb813;">
            <p class="circle_text"><%= event.getDateString() %></p>
          </div>
        <% else %>
          <div class="circle_icon" style="left:<%=getEventLocationPercentage(@events, event).to_s %>%">
            <p class="circle_text"><%= event.getDateString() %></p>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <div class="circle_icon" style="left:left;">
        <p class="circle_text"><%= event.getDateString() %></p>
        <div class="circle_picture"><%= image_tag(event.goal_category.avatar.url(:medium), size:"16x16") %></div>
      </div>
    <% end %>

  <% elsif event == @events.last %>
    <% if event.isVisit() %>
      <%= link_to(client_visit_path(event.client, event), :remote => true) do %>
        <% if event == @visit %>
          <div class="circle_icon" style="float:right;>%;background-color:#fdb813;">
            <p class="circle_text"><%= event.getDateString() %></p>
          </div>
        <% else %>
          <div class="circle_icon" style="float:right;">
            <p class="circle_text"><%= event.getDateString() %></p>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <div class="circle_icon" style="float:right;">
        <p class="circle_text"><%= event.getDateString() %></p>
        <div class="circle_picture"><%= image_tag(event.goal_category.avatar.url(:medium), size:"16x16") %></div>
      </div>
    <% end %>

  <% else %>
    <% if event.isVisit() %>
      <%= link_to(client_visit_path(event.client, event), :remote => true) do %>
        <% if event == @visit %>
          <div class="circle_icon" style="left:<%=getEventLocationPercentage(@events, event).to_s %>%;background-color:#fdb813;">
            <p class="circle_text"><%= event.getDateString() %></p>
          </div>
        <% else %>
          <div class="circle_icon" style="left:<%=getEventLocationPercentage(@events, event).to_s %>%">
            <p class="circle_text"><%= event.getDateString() %></p>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <div class="circle_icon" style="left:<%=getEventLocationPercentage(@events, event).to_s %>%;">
        <p class="circle_text"><%= event.getDateString() %></p>
        <div class="circle_picture"><%= image_tag(event.goal_category.avatar.url(:medium), size:"16x16") %></div>
      </div>
    <% end %>
  <% end %>
<% end %>
